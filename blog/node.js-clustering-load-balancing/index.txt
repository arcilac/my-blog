3:I[5613,[],""]
5:I[31778,[],""]
6:I[70269,["250","static/chunks/250-f66e98452b80d3d3.js","185","static/chunks/app/layout-eeb53c07ffb10a3f.js"],"ThemeProvider"]
7:I[63186,["250","static/chunks/250-f66e98452b80d3d3.js","185","static/chunks/app/layout-eeb53c07ffb10a3f.js"],""]
8:I[69148,["250","static/chunks/250-f66e98452b80d3d3.js","185","static/chunks/app/layout-eeb53c07ffb10a3f.js"],""]
4:["slug","node.js-clustering-load-balancing","d"]
0:["gwjwrzBKYUfERbK0d3yGV",[[["",{"children":["blog",{"children":[["slug","node.js-clustering-load-balancing","d"],{"children":["__PAGE__?{\"slug\":\"node.js-clustering-load-balancing\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","node.js-clustering-load-balancing","d"],{"children":["__PAGE__",{},["$L1","$L2",null]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/my-blog/_next/static/css/a494df4e6249897d.css","precedence":"next","crossOrigin":""}]]}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},[null,["$","html",null,{"lang":"en","suppressHydrationWarning":true,"children":[["$","head",null,{"children":[["$","meta",null,{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","link",null,{"rel":"icon","href":"/favicon.ico"}]]}],["$","body",null,{"className":"bg-black text-white min-h-screen flex flex-col","children":["$","$L6",null,{"defaultTheme":"dark","children":["$","div",null,{"className":"flex flex-col min-h-screen","children":[["$","$L7",null,{}],["$","div",null,{"className":"flex-grow","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}]}],["$","$L8",null,{}]]}]}]}]]}],null]],[[["$","link","0",{"rel":"stylesheet","href":"/my-blog/_next/static/css/83cc0ea6f102b864.css","precedence":"next","crossOrigin":""}]],"$L9"]]]]
9:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Blog"}],["$","meta","3",{"name":"description","content":"A personal blog connected with Notion"}],["$","link","4",{"rel":"icon","href":"/my-blog/favicon.ico","type":"image/x-icon","sizes":"16x16"}]]
1:null
a:I[74366,["644","static/chunks/644-4de71cea8aeaed79.js","852","static/chunks/852-215445fe88778aae.js","308","static/chunks/app/blog/%5Bslug%5D/page-fab3f594c1476cf4.js"],"NotionRenderer"]
2:["$","main",null,{"className":"post-container","children":["$","article",null,{"className":"post-article","children":[null,["$","h1",null,{"className":"post-title","children":"Node.js Clustering and Load Balancing"}],["$","div",null,{"className":"post-content","children":["$","$La",null,{"blocks":[{"id":"block-0","type":"heading_2","content":"What Is Clustering in Node.js?","properties":{}},{"id":"block-1","type":"paragraph","content":"Node.js runs on a **single thread**, which means it can only use one CPU core by default. Clustering allows you to **spawn multiple instances** of your application, each running on its own CPU core. These instances, or “workers,” can handle requests in parallel, significantly improving throughput and availability.","properties":{}},{"id":"block-2","type":"heading_2","content":"How Does Clustering Work?","properties":{}},{"id":"block-3","type":"paragraph","content":"Node.js provides a built-in `cluster` module. A **master process** manages several **worker processes**, each with its own event loop. When a request comes in, it’s distributed among the workers.","properties":{}},{"id":"block-4","type":"heading_3","content":"Basic Clustering Example","properties":{}},{"id":"block-5","type":"code","content":"```javascript\n`\nconst cluster = require('cluster');\nconst http = require('http');\nconst os = require('os');\n\nif (cluster.isPrimary) {\n  const numCPUs = os.cpus().length;\n  console.log(`Master ${process.pid} is running`);\n\n  // Fork workers.\n  for (let i = 0; i < numCPUs; i++) {\n    cluster.fork();\n  }\n\n  // Optional: Restart worker on exit\n  cluster.on('exit', (worker) => {\n    console.log(`Worker ${worker.process.pid} died. Restarting...`);\n    cluster.fork();\n  });\n} else {\n  http.createServer((req, res) => {\n    res.end(`Handled by worker ${process.pid}`);\n  }).listen(3000);\n\n  console.log(`Worker ${process.pid} started`);\n}\n\n`\n```","properties":{"language":"$undefined"}},{"id":"block-6","type":"heading_2","content":"Why Use Clustering?","properties":{}},{"id":"block-7","type":"table","content":"| Benefit         | Explanation                                            |\n| --------------- | ------------------------------------------------------ |\n| Performance     | Leverages multi-core systems to handle more requests   |\n| Fault tolerance | If a worker crashes, others continue to serve requests |\n| Scalability     | Can scale apps horizontally by running more processes  |\n| Simple setup    | Requires minimal changes to existing Node.js apps      |","properties":{}},{"id":"block-7-0","type":"table_row","content":"","properties":{}},{"id":"block-7-1","type":"table_row","content":"","properties":{}},{"id":"block-7-2","type":"table_row","content":"","properties":{}},{"id":"block-7-3","type":"table_row","content":"","properties":{}},{"id":"block-7-4","type":"table_row","content":"","properties":{}},{"id":"block-8","type":"divider","content":"---","properties":{}},{"id":"block-9","type":"heading_2","content":"Load Balancing Concepts","properties":{}},{"id":"block-10","type":"paragraph","content":"Clustering distributes load **within a single machine**, but to handle **higher traffic or redundancy**, you may need **external load balancing**:","properties":{}},{"id":"block-11","type":"heading_3","content":"Common Load Balancing Methods:","properties":{}},{"id":"block-12","type":"bulleted_list_item","content":"- **Round-robin:** Requests are distributed evenly across instances","properties":{}},{"id":"block-13","type":"bulleted_list_item","content":"- **Least connections:** Directs traffic to the server with the fewest active connections","properties":{}},{"id":"block-14","type":"bulleted_list_item","content":"- **Sticky sessions:** Ensures a user stays connected to the same worker or server","properties":{}},{"id":"block-15","type":"heading_3","content":"Load Balancing Tools:","properties":{}},{"id":"block-16","type":"bulleted_list_item","content":"- **Nginx** or **HAProxy**: Can sit in front of clustered Node.js servers","properties":{}},{"id":"block-17","type":"bulleted_list_item","content":"- **PM2**: A Node.js process manager that supports clustering and load balancing","properties":{}},{"id":"block-18","type":"bulleted_list_item","content":"- **Cloud load balancers**: Offered by AWS, GCP, Azure, etc.","properties":{}},{"id":"block-19","type":"divider","content":"---","properties":{}},{"id":"block-20","type":"heading_2","content":"Combining Clustering with Load Balancing","properties":{}},{"id":"block-21","type":"paragraph","content":"You can combine both strategies for maximum performance:","properties":{}},{"id":"block-22","type":"bulleted_list_item","content":"- Use **Node.js clustering** to utilize all cores of each server","properties":{}},{"id":"block-23","type":"bulleted_list_item","content":"- Use a **reverse proxy** like **Nginx** to distribute load across multiple servers","properties":{}},{"id":"block-24","type":"divider","content":"---","properties":{}},{"id":"block-25","type":"heading_2","content":"Best Practices","properties":{}},{"id":"block-26","type":"bulleted_list_item","content":"- Always monitor worker health and restart on failure","properties":{}},{"id":"block-27","type":"bulleted_list_item","content":"- Share minimal state between workers (use external storage like Redis if needed)","properties":{}},{"id":"block-28","type":"bulleted_list_item","content":"- Use sticky sessions if your app relies on session-based auth","properties":{}},{"id":"block-29","type":"bulleted_list_item","content":"- Avoid memory leaks — they’ll affect all workers over time","properties":{}},{"id":"block-30","type":"bulleted_list_item","content":"- Test under load to determine ideal number of workers","properties":{}},{"id":"block-31","type":"divider","content":"---","properties":{}},{"id":"block-32","type":"heading_2","content":"Conclusion","properties":{}},{"id":"block-33","type":"paragraph","content":"Clustering and load balancing are essential for scaling Node.js applications effectively. By leveraging multiple CPU cores and distributing traffic smartly, you can handle more users, increase resilience, and build faster, more reliable backends.","properties":{}}]}]}],["$","div",null,{"className":"post-meta","children":[["$","div",null,{"className":"post-date","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-calendar h-4 w-4","children":[["$","rect","eu3xkr",{"width":"18","height":"18","x":"3","y":"4","rx":"2","ry":"2"}],["$","line","m3sa8f",{"x1":"16","x2":"16","y1":"2","y2":"6"}],["$","line","18kwsl",{"x1":"8","x2":"8","y1":"2","y2":"6"}],["$","line","xt86sb",{"x1":"3","x2":"21","y1":"10","y2":"10"}],"$undefined"]}],["$","span",null,{"children":"May 6, 2025"}]]}],["$","div",null,{"className":"post-tags","children":[["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-tag h-4 w-4","children":[["$","path","14b2ls",{"d":"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"}],["$","path","7u93v4",{"d":"M7 7h.01"}],"$undefined"]}],["$","div",null,{"className":"flex gap-2","children":[["$","span","JavaScript",{"className":"post-tag","children":["#","JavaScript"]}],["$","span","Load-Balancing",{"className":"post-tag","children":["#","Load-Balancing"]}],["$","span","Node.js",{"className":"post-tag","children":["#","Node.js"]}]]}]]}]]}]]}]}]
